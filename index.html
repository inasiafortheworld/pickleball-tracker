<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Pickleball Tournament Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group select, .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .team-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .team-section h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-success {
            background: #28a745;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
        }

        .leaderboard {
            margin-top: 20px;
        }

        .leaderboard-item {
            background: #f8f9fa;
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #667eea;
        }

        .leaderboard-item:nth-child(1) {
            border-left-color: #ffd700;
            background: #fff9e6;
        }

        .leaderboard-item:nth-child(2) {
            border-left-color: #c0c0c0;
            background: #f5f5f5;
        }

        .leaderboard-item:nth-child(3) {
            border-left-color: #cd7f32;
            background: #fff3e6;
        }

        .player-name {
            font-weight: 600;
            font-size: 18px;
        }

        .player-stats {
            text-align: right;
            color: #666;
        }

        .games-list {
            margin-top: 20px;
        }

        .game-card {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .game-number {
            font-weight: bold;
            font-size: 18px;
            color: #667eea;
        }

        .game-teams {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
        }

        .team {
            text-align: center;
        }

        .team-players {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .team-score {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .vs {
            font-weight: bold;
            color: #999;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .betting-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .betting-section h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .bet-category {
            margin-bottom: 25px;
        }

        .bet-category h4 {
            color: #333;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .bet-list {
            list-style: none;
            padding-left: 0;
        }

        .bet-list li {
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
            color: #555;
        }

        .bet-list li:last-child {
            border-bottom: none;
        }

        .bet-emoji {
            margin-right: 10px;
        }

        .suggested-rotation {
            background: #e7f3ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #667eea;
        }

        .suggested-rotation h4 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .rotation-matchup {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .advanced-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .advanced-stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }

        .advanced-stat-card h4 {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .advanced-stat-card .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        /* Live Scoring Styles */
        .live-game-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .scoreboard {
            display: grid;
            grid-template-columns: 1fr 40px 1fr;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
        }

        @media (min-width: 768px) {
            .scoreboard {
                grid-template-columns: 1fr auto 1fr;
                gap: 30px;
                margin-bottom: 30px;
            }
        }

        .team-display {
            text-align: center;
            background: white;
            padding: 15px 10px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        @media (min-width: 768px) {
            .team-display {
                padding: 25px;
            }
        }

        .team-display.winning {
            border: 3px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .team-display h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 16px;
        }

        @media (min-width: 768px) {
            .team-display h3 {
                margin-bottom: 15px;
                font-size: 18px;
            }
        }

        .team-display .score-display {
            font-size: 56px;
            font-weight: bold;
            color: #667eea;
            margin: 15px 0;
            line-height: 1;
        }

        @media (min-width: 768px) {
            .team-display .score-display {
                font-size: 72px;
                margin: 20px 0;
            }
        }

        .team-display .players-display {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }

        @media (min-width: 768px) {
            .team-display .players-display {
                font-size: 16px;
                margin-bottom: 20px;
            }
        }

        .player-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .player-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 20px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 60px;
            touch-action: manipulation;
        }

        @media (hover: hover) {
            .player-btn:hover {
                transform: scale(1.05);
                box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            }
        }

        .player-btn:active {
            transform: scale(0.95);
            opacity: 0.8;
        }

        .ace-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 12px 20px;
            font-size: 14px;
            margin-top: 5px;
        }

        .undo-btn {
            background: #ffc107;
            color: #333;
            padding: 10px 20px;
            font-size: 14px;
            margin-top: 10px;
        }

        .game-controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .game-controls button {
            flex: 1;
        }

        .point-history {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .point-history h4 {
            margin-bottom: 15px;
            color: #667eea;
        }

        .point-item {
            padding: 10px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .point-item:last-child {
            border-bottom: none;
        }

        .point-item.ace {
            background: #fff3e6;
            border-left: 3px solid #f5576c;
            padding-left: 15px;
        }

        #setupView, #liveView {
            display: none;
        }

        #setupView.active, #liveView.active {
            display: block;
        }

        .suggested-rotation {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3);
        }

        .suggested-rotation h4 {
            margin-bottom: 15px;
            font-size: 16px;
        }

        .suggested-matchup {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        .use-suggestion-btn {
            background: white;
            color: #f5576c;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            width: 100%;
            transition: all 0.2s;
        }

        .use-suggestion-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.3);
        }

        .partnership-progress {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .partnership-progress h4 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .progress-stat {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .progress-stat:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèì Pickleball Tournament Tracker</h1>
            <p>Track stats, games, and betting for your 6-player tournament</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('play')">Play Game</button>
            <button class="tab" onclick="switchTab('games')">Games History</button>
            <button class="tab" onclick="switchTab('stats')">Player Stats</button>
            <button class="tab" onclick="switchTab('players')">Manage Players</button>
        </div>

        <!-- Play Game Tab -->
        <div id="play" class="tab-content active">
            <!-- Setup View -->
            <div id="setupView" class="active">
                <h2>Setup New Game</h2>

                <div class="suggested-rotation" id="suggestedRotation" style="display: none;">
                    <h4>üí° Suggested Next Matchup</h4>
                    <div class="suggested-matchup" id="rotationSuggestion"></div>
                    <button class="use-suggestion-btn" onclick="useSuggestedMatchup()">Start Game with This Matchup</button>
                </div>

                <div class="team-section">
                    <h3>Team 1</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Player 1</label>
                            <select id="team1Player1">
                                <option value="">Select Player</option>
                                <option value="Raeden">Raeden</option>
                                <option value="Kaushik">Kaushik</option>
                                <option value="Clarissa">Clarissa</option>
                                <option value="Rakesh">Rakesh</option>
                                <option value="Aaron">Aaron</option>
                                <option value="Zach">Zach</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Player 2</label>
                            <select id="team1Player2">
                                <option value="">Select Player</option>
                                <option value="Raeden">Raeden</option>
                                <option value="Kaushik">Kaushik</option>
                                <option value="Clarissa">Clarissa</option>
                                <option value="Rakesh">Rakesh</option>
                                <option value="Aaron">Aaron</option>
                                <option value="Zach">Zach</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="team-section">
                    <h3>Team 2</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Player 1</label>
                            <select id="team2Player1">
                                <option value="">Select Player</option>
                                <option value="Raeden">Raeden</option>
                                <option value="Kaushik">Kaushik</option>
                                <option value="Clarissa">Clarissa</option>
                                <option value="Rakesh">Rakesh</option>
                                <option value="Aaron">Aaron</option>
                                <option value="Zach">Zach</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Player 2</label>
                            <select id="team2Player2">
                                <option value="">Select Player</option>
                                <option value="Raeden">Raeden</option>
                                <option value="Kaushik">Kaushik</option>
                                <option value="Clarissa">Clarissa</option>
                                <option value="Rakesh">Rakesh</option>
                                <option value="Aaron">Aaron</option>
                                <option value="Zach">Zach</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="startGame()">Start Game</button>
            </div>

            <!-- Live Scoring View -->
            <div id="liveView">
                <h2>Live Game Scoring</h2>

                <div class="live-game-container">
                    <div class="scoreboard">
                        <div class="team-display" id="team1Display">
                            <h3>Team 1</h3>
                            <div class="players-display" id="team1PlayersDisplay"></div>
                            <div class="score-display" id="team1ScoreDisplay">0</div>
                            <div class="player-buttons" id="team1Buttons"></div>
                            <button class="player-btn ace-btn" onclick="recordAce(1)">‚ö° Team Ace</button>
                        </div>

                        <div class="vs">VS</div>

                        <div class="team-display" id="team2Display">
                            <h3>Team 2</h3>
                            <div class="players-display" id="team2PlayersDisplay"></div>
                            <div class="score-display" id="team2ScoreDisplay">0</div>
                            <div class="player-buttons" id="team2Buttons"></div>
                            <button class="player-btn ace-btn" onclick="recordAce(2)">‚ö° Team Ace</button>
                        </div>
                    </div>

                    <div class="point-history">
                        <h4>Point History</h4>
                        <div id="pointHistoryList">
                            <p style="text-align: center; color: #999;">No points scored yet</p>
                        </div>
                    </div>

                    <div class="game-controls">
                        <button class="btn undo-btn" onclick="undoLastPoint()">‚Ü∂ Undo Last Point</button>
                        <button class="btn btn-success" onclick="finishGame()">Finish Game</button>
                        <button class="btn btn-danger" onclick="cancelGame()">Cancel Game</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Games History Tab -->
        <div id="games" class="tab-content">
            <h2>Games History</h2>
            <div class="games-list" id="gamesList"></div>
        </div>

        <!-- Stats Tab -->
        <div id="stats" class="tab-content">
            <h2>Player Statistics</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Total Games Played</h3>
                    <div class="value" id="totalGames">0</div>
                </div>
                <div class="stat-card">
                    <h3>Total Points Scored</h3>
                    <div class="value" id="totalPoints">0</div>
                </div>
                <div class="stat-card">
                    <h3>Total Aces</h3>
                    <div class="value" id="totalAces">0</div>
                </div>
                <div class="stat-card">
                    <h3>Total Winners Hit</h3>
                    <div class="value" id="totalWinners">0</div>
                </div>
                <div class="stat-card">
                    <h3>Longest Game</h3>
                    <div id="longestGame" style="line-height: 1.3;">-</div>
                </div>
                <div class="stat-card">
                    <h3>Quickest Game</h3>
                    <div id="quickestGame" style="line-height: 1.3;">-</div>
                </div>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 15px;">Leaderboards</h3>

            <h4 style="margin-top: 20px; margin-bottom: 10px;">üèÜ Win Percentage</h4>
            <div class="leaderboard" id="winPercentageLeaderboard"></div>

            <h4 style="margin-top: 20px; margin-bottom: 10px;">‚≠ê Total Wins</h4>
            <div class="leaderboard" id="totalWinsLeaderboard"></div>

            <h4 style="margin-top: 20px; margin-bottom: 10px;">üéØ Points Per Game</h4>
            <div class="leaderboard" id="pointsPerGameLeaderboard"></div>

            <h4 style="margin-top: 20px; margin-bottom: 10px;">üî• Winners Per Game</h4>
            <div class="leaderboard" id="winnersLeaderboard"></div>

            <h4 style="margin-top: 20px; margin-bottom: 10px;">‚ö° Aces Per Game</h4>
            <div class="leaderboard" id="acesLeaderboard"></div>

            <h4 style="margin-top: 20px; margin-bottom: 10px;">üìä Individual Player Breakdown</h4>
            <div id="playerBreakdown"></div>

            <div class="partnership-progress">
                <h4>ü§ù Partnership Tracker</h4>
                <div class="progress-stat">
                    <span><strong>Unique Partnerships Played:</strong></span>
                    <span id="uniquePartnerships">0 / 15</span>
                </div>
                <div class="progress-stat">
                    <span><strong>All Partnerships Completed:</strong></span>
                    <span id="allPartnershipsStatus">‚ùå Not Yet</span>
                </div>
                <div class="progress-stat">
                    <span><strong>Progress to Full Round Robin:</strong></span>
                    <span id="roundRobinProgress">0 / 45 games</span>
                </div>
            </div>
        </div>

        <!-- Manage Players Tab -->
        <div id="players" class="tab-content">
            <h2>Manage Players</h2>

            <div class="team-section">
                <h3>Add New Player</h3>
                <div class="form-group">
                    <label>Player Name</label>
                    <input type="text" id="newPlayerName" placeholder="Enter player name">
                </div>
                <button class="btn" onclick="addPlayer()">Add Player</button>
            </div>

            <div class="team-section">
                <h3>Current Players</h3>
                <div id="playersList"></div>
            </div>
        </div>

    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCgqqSHvUsOILRibuAgoGiMjsSo6xJc4Hg",
            authDomain: "pickleball-tracker-52a82.firebaseapp.com",
            databaseURL: "https://pickleball-tracker-52a82-default-rtdb.firebaseio.com",
            projectId: "pickleball-tracker-52a82",
            storageBucket: "pickleball-tracker-52a82.firebasestorage.app",
            messagingSenderId: "289326128503",
            appId: "1:289326128503:web:243a46aeb6d917dc43d572"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const gamesRef = database.ref('games');

        let players = JSON.parse(localStorage.getItem('pickleballPlayers')) || ['Raeden', 'Kaushik', 'Clarissa', 'Rakesh', 'Aaron', 'Zach'];
        let games = [];
        let currentGame = null;
        let gameStartTime = null;

        // Load games from Firebase
        function loadGames() {
            gamesRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    games = Object.values(data).sort((a, b) => a.timestamp.localeCompare(b.timestamp));
                } else {
                    games = [];
                }

                // Update displays if we're on relevant tabs
                const activeTab = document.querySelector('.tab.active');
                if (activeTab) {
                    const tabName = activeTab.textContent.toLowerCase();
                    if (tabName.includes('games')) {
                        displayGames();
                    } else if (tabName.includes('stats')) {
                        updateStats();
                    } else if (tabName.includes('play')) {
                        suggestNextMatchup();
                    }
                }
            });
        }

        // Save game to Firebase
        function saveGameToCloud(game) {
            console.log('Attempting to save game:', game);
            gamesRef.push(game)
                .then(() => {
                    console.log('Game saved successfully to Firebase!');
                })
                .catch((error) => {
                    console.error('Error saving game to Firebase:', error);
                    alert('Error saving game: ' + error.message + '\n\nPlease check Firebase database rules.');
                });
        }

        // Delete game from Firebase
        function deleteGameFromCloud(gameId) {
            gamesRef.orderByChild('id').equalTo(gameId).once('value', (snapshot) => {
                snapshot.forEach((child) => {
                    child.ref.remove();
                });
            });
        }

        // Add player
        function addPlayer() {
            const playerName = document.getElementById('newPlayerName').value.trim();

            if (!playerName) {
                alert('Please enter a player name!');
                return;
            }

            if (players.includes(playerName)) {
                alert('This player already exists!');
                return;
            }

            players.push(playerName);
            localStorage.setItem('pickleballPlayers', JSON.stringify(players));

            document.getElementById('newPlayerName').value = '';
            updatePlayersList();
            updatePlayerSelects();
            alert(`${playerName} has been added!`);
        }

        // Remove player
        function removePlayer(playerName) {
            if (confirm(`Are you sure you want to remove ${playerName}? This cannot be undone.`)) {
                players = players.filter(p => p !== playerName);
                localStorage.setItem('pickleballPlayers', JSON.stringify(players));
                updatePlayersList();
                updatePlayerSelects();
            }
        }

        // Update players list display
        function updatePlayersList() {
            const playersList = document.getElementById('playersList');
            playersList.innerHTML = players.map(player => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: white; margin-bottom: 10px; border-radius: 8px;">
                    <span style="font-size: 16px; font-weight: 600;">${player}</span>
                    <button class="delete-btn" onclick="removePlayer('${player}')">Remove</button>
                </div>
            `).join('');
        }

        // Update all player select dropdowns
        function updatePlayerSelects() {
            const selects = ['team1Player1', 'team1Player2', 'team2Player1', 'team2Player2'];
            selects.forEach(selectId => {
                const select = document.getElementById(selectId);
                const currentValue = select.value;
                select.innerHTML = '<option value="">Select Player</option>' +
                    players.map(player => `<option value="${player}">${player}</option>`).join('');
                if (players.includes(currentValue)) {
                    select.value = currentValue;
                }
            });
        }

        // Initialize
        loadGames();

        // Switch tabs
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(tabName === 'play' ? 'play' : tabName).classList.add('active');

            if (tabName === 'stats') {
                updateStats();
            } else if (tabName === 'games') {
                displayGames();
            } else if (tabName === 'play') {
                suggestNextMatchup();
            } else if (tabName === 'players') {
                updatePlayersList();
            }
        }

        // Global variable to store suggested matchup
        let suggestedMatchup = null;

        // Suggest next matchup
        function suggestNextMatchup() {
            // Track all partnerships
            const partnerships = {};
            players.forEach(p1 => {
                players.forEach(p2 => {
                    if (p1 < p2) { // Only create one key per pair
                        const key = `${p1}-${p2}`;
                        partnerships[key] = 0;
                    }
                });
            });

            // Count how many times each partnership has played
            games.forEach(game => {
                const team1Key = [game.team1[0], game.team1[1]].sort().join('-');
                const team2Key = [game.team2[0], game.team2[1]].sort().join('-');
                if (partnerships[team1Key] !== undefined) partnerships[team1Key]++;
                if (partnerships[team2Key] !== undefined) partnerships[team2Key]++;
            });

            // Find partnerships that haven't played yet, or played the least
            const sorted = Object.entries(partnerships).sort((a, b) => a[1] - b[1]);
            const minCount = sorted[0][1];
            const leastPlayedPartnerships = sorted.filter(p => p[1] === minCount);

            // Pick a random partnership from the least played ones
            const randomPartnership = leastPlayedPartnerships[Math.floor(Math.random() * leastPlayedPartnerships.length)];
            const team1 = randomPartnership[0].split('-');

            // Find the best opposing team from remaining players
            const available = players.filter(p => !team1.includes(p));

            // Try to find the least-played partnership from available players
            let bestTeam2 = null;
            let bestCount = Infinity;

            for (let i = 0; i < available.length; i++) {
                for (let j = i + 1; j < available.length; j++) {
                    const key = [available[i], available[j]].sort().join('-');
                    const count = partnerships[key] || 0;
                    if (count < bestCount) {
                        bestCount = count;
                        bestTeam2 = [available[i], available[j]];
                    }
                }
            }

            const team2 = bestTeam2 || [available[0], available[1]];

            // Store the suggested matchup
            suggestedMatchup = { team1, team2 };

            document.getElementById('suggestedRotation').style.display = 'block';

            let message = '';
            if (minCount === 0) {
                message = `<div style="margin-bottom: 8px; font-size: 14px; opacity: 0.9;">These partnerships haven't played together yet!</div>`;
            } else {
                message = `<div style="margin-bottom: 8px; font-size: 14px; opacity: 0.9;">Least played partnerships (${minCount} time${minCount === 1 ? '' : 's'})</div>`;
            }

            document.getElementById('rotationSuggestion').innerHTML = `
                ${message}
                <div><strong>${team1[0]} & ${team1[1]}</strong></div>
                <div style="margin: 10px 0; font-size: 24px; opacity: 0.8;">VS</div>
                <div><strong>${team2[0]} & ${team2[1]}</strong></div>
            `;
        }

        // Use suggested matchup
        function useSuggestedMatchup() {
            if (!suggestedMatchup) return;

            document.getElementById('team1Player1').value = suggestedMatchup.team1[0];
            document.getElementById('team1Player2').value = suggestedMatchup.team1[1];
            document.getElementById('team2Player1').value = suggestedMatchup.team2[0];
            document.getElementById('team2Player2').value = suggestedMatchup.team2[1];

            // Automatically start the game
            startGame();
        }

        // Start game
        function startGame() {
            const team1 = [
                document.getElementById('team1Player1').value,
                document.getElementById('team1Player2').value
            ];
            const team2 = [
                document.getElementById('team2Player1').value,
                document.getElementById('team2Player2').value
            ];

            if (!team1[0] || !team1[1] || !team2[0] || !team2[1]) {
                alert('Please select all players!');
                return;
            }

            if (team1[0] === team1[1] || team2[0] === team2[1]) {
                alert('Players cannot be on the same team with themselves!');
                return;
            }

            const allPlayers = [...team1, ...team2];
            if (new Set(allPlayers).size !== 4) {
                alert('Each player can only play once per game!');
                return;
            }

            currentGame = {
                team1: team1,
                team2: team2,
                team1Score: 0,
                team2Score: 0,
                pointHistory: [],
                playerWinners: {},
                playerAces: {}
            };

            allPlayers.forEach(p => {
                currentGame.playerWinners[p] = 0;
                currentGame.playerAces[p] = 0;
            });

            gameStartTime = Date.now();

            document.getElementById('setupView').classList.remove('active');
            document.getElementById('liveView').classList.add('active');

            updateLiveDisplay();
        }

        // Update live display
        function updateLiveDisplay() {
            document.getElementById('team1PlayersDisplay').textContent =
                `${currentGame.team1[0]} & ${currentGame.team1[1]}`;
            document.getElementById('team2PlayersDisplay').textContent =
                `${currentGame.team2[0]} & ${currentGame.team2[1]}`;

            document.getElementById('team1ScoreDisplay').textContent = currentGame.team1Score;
            document.getElementById('team2ScoreDisplay').textContent = currentGame.team2Score;

            // Update winning team highlight
            document.getElementById('team1Display').classList.toggle('winning',
                currentGame.team1Score > currentGame.team2Score);
            document.getElementById('team2Display').classList.toggle('winning',
                currentGame.team2Score > currentGame.team1Score);

            // Create player buttons
            document.getElementById('team1Buttons').innerHTML = currentGame.team1.map(player => `
                <button class="player-btn" onclick="recordPoint(1, '${player}')">
                    ${player} Winner (${currentGame.playerWinners[player]})
                </button>
            `).join('');

            document.getElementById('team2Buttons').innerHTML = currentGame.team2.map(player => `
                <button class="player-btn" onclick="recordPoint(2, '${player}')">
                    ${player} Winner (${currentGame.playerWinners[player]})
                </button>
            `).join('');

            // Update point history
            if (currentGame.pointHistory.length === 0) {
                document.getElementById('pointHistoryList').innerHTML =
                    '<p style="text-align: center; color: #999;">No points scored yet</p>';
            } else {
                document.getElementById('pointHistoryList').innerHTML =
                    currentGame.pointHistory.map((point, idx) => `
                        <div class="point-item ${point.ace ? 'ace' : ''}">
                            <span>
                                <strong>${point.player}</strong> ${point.ace ? '‚ö° ACE' : 'winner'}
                                ${point.team === 1 ? '(Team 1)' : '(Team 2)'}
                            </span>
                            <span>${point.score}</span>
                        </div>
                    `).reverse().join('');
            }
        }

        // Record point
        function recordPoint(team, player) {
            if (team === 1) {
                currentGame.team1Score++;
            } else {
                currentGame.team2Score++;
            }

            currentGame.playerWinners[player]++;
            currentGame.pointHistory.push({
                team: team,
                player: player,
                score: `${currentGame.team1Score}-${currentGame.team2Score}`,
                ace: false
            });

            updateLiveDisplay();
        }

        // Record ace
        function recordAce(team) {
            if (currentGame.pointHistory.length === 0) {
                alert('Please record who hit the ace first using their player button!');
                return;
            }

            const lastPoint = currentGame.pointHistory[currentGame.pointHistory.length - 1];
            if (lastPoint.team !== team) {
                alert('The ace should be for the team that just scored!');
                return;
            }

            if (lastPoint.ace) {
                alert('This point is already marked as an ace!');
                return;
            }

            lastPoint.ace = true;
            currentGame.playerAces[lastPoint.player]++;

            updateLiveDisplay();
        }

        // Undo last point
        function undoLastPoint() {
            if (currentGame.pointHistory.length === 0) {
                alert('No points to undo!');
                return;
            }

            const lastPoint = currentGame.pointHistory.pop();

            if (lastPoint.team === 1) {
                currentGame.team1Score--;
            } else {
                currentGame.team2Score--;
            }

            currentGame.playerWinners[lastPoint.player]--;
            if (lastPoint.ace) {
                currentGame.playerAces[lastPoint.player]--;
            }

            updateLiveDisplay();
        }

        // Finish game
        function finishGame() {
            if (currentGame.team1Score === 0 && currentGame.team2Score === 0) {
                alert('Please score some points before finishing the game!');
                return;
            }

            const gameEndTime = Date.now();
            const durationSeconds = Math.round((gameEndTime - gameStartTime) / 1000);

            const game = {
                id: Date.now(),
                team1: currentGame.team1,
                team2: currentGame.team2,
                team1Score: currentGame.team1Score,
                team2Score: currentGame.team2Score,
                playerWinners: currentGame.playerWinners,
                playerAces: currentGame.playerAces,
                winner: currentGame.team1Score > currentGame.team2Score ? 1 : 2,
                timestamp: new Date().toISOString(),
                duration: durationSeconds
            };

            saveGameToCloud(game);
            alert('Game saved successfully!');
            resetToSetup();
        }

        // Cancel game
        function cancelGame() {
            if (confirm('Are you sure you want to cancel this game? All progress will be lost.')) {
                resetToSetup();
            }
        }

        // Reset to setup
        function resetToSetup() {
            currentGame = null;
            document.getElementById('liveView').classList.remove('active');
            document.getElementById('setupView').classList.add('active');
            document.getElementById('team1Player1').value = '';
            document.getElementById('team1Player2').value = '';
            document.getElementById('team2Player1').value = '';
            document.getElementById('team2Player2').value = '';
            suggestNextMatchup();
        }

        // Display games
        function displayGames() {
            const gamesList = document.getElementById('gamesList');

            if (games.length === 0) {
                gamesList.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">No games recorded yet. Play your first game!</p>';
                return;
            }

            gamesList.innerHTML = games.map((game, index) => {
                const winnerStats = Object.entries(game.playerWinners || {})
                    .map(([player, count]) => `${player}: ${count}`)
                    .join(', ');

                const aceStats = game.playerAces ?
                    Object.entries(game.playerAces)
                        .filter(([player, count]) => count > 0)
                        .map(([player, count]) => `${player}: ${count}`)
                        .join(', ') : '';

                const totalAces = game.playerAces ?
                    Object.values(game.playerAces).reduce((sum, count) => sum + count, 0) :
                    (game.team1Aces || 0) + (game.team2Aces || 0);

                // Format timestamp
                const gameDate = new Date(game.timestamp);
                const dateStr = gameDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                const timeStr = gameDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });

                // Format duration
                let duration = '';
                if (game.duration) {
                    const minutes = Math.floor(game.duration / 60);
                    const seconds = game.duration % 60;
                    duration = minutes > 0 ? `${minutes}m ${seconds}s` : `${seconds}s`;
                }

                return `
                    <div class="game-card">
                        <div class="game-header">
                            <div>
                                <div class="game-number">Game ${games.length - index}</div>
                                <div style="font-size: 12px; color: #999; margin-top: 5px;">
                                    ${dateStr} at ${timeStr}${duration ? ` ‚Ä¢ ${duration}` : ''}
                                </div>
                            </div>
                            <button class="delete-btn" onclick="deleteGame(${game.id})">Delete</button>
                        </div>
                        <div class="game-teams">
                            <div class="team ${game.winner === 1 ? 'winner' : ''}">
                                <div class="team-players">${game.team1[0]} & ${game.team1[1]}</div>
                                <div class="team-score">${game.team1Score}</div>
                            </div>
                            <div class="vs">VS</div>
                            <div class="team ${game.winner === 2 ? 'winner' : ''}">
                                <div class="team-players">${game.team2[0]} & ${game.team2[1]}</div>
                                <div class="team-score">${game.team2Score}</div>
                            </div>
                        </div>
                        ${winnerStats ? `<div style="margin-top: 15px; font-size: 14px; color: #666; text-align: center;">
                            <strong>Winners:</strong> ${winnerStats}
                        </div>` : ''}
                        ${aceStats ? `<div style="margin-top: 10px; font-size: 14px; color: #666; text-align: center;">
                            <strong>Aces:</strong> ${aceStats}
                        </div>` : totalAces > 0 ? `<div style="margin-top: 10px; font-size: 14px; color: #666; text-align: center;">
                            <strong>Total Aces:</strong> ${totalAces}
                        </div>` : ''}
                    </div>
                `;
            }).reverse().join('');
        }

        // Delete game
        function deleteGame(gameId) {
            if (confirm('Are you sure you want to delete this game?')) {
                deleteGameFromCloud(gameId);
            }
        }

        // Calculate stats
        function updateStats() {
            const stats = {};

            players.forEach(player => {
                stats[player] = {
                    gamesPlayed: 0,
                    wins: 0,
                    losses: 0,
                    pointsFor: 0,
                    pointsAgainst: 0,
                    aces: 0,
                    winners: 0
                };
            });

            games.forEach(game => {
                const team1Players = game.team1;
                const team2Players = game.team2;
                const team1Won = game.winner === 1;

                team1Players.forEach(player => {
                    stats[player].gamesPlayed++;
                    stats[player].pointsFor += game.team1Score;
                    stats[player].pointsAgainst += game.team2Score;
                    stats[player].winners += (game.playerWinners && game.playerWinners[player]) || 0;
                    stats[player].aces += (game.playerAces && game.playerAces[player]) || (game.team1Aces ? game.team1Aces / 2 : 0);
                    if (team1Won) stats[player].wins++;
                    else stats[player].losses++;
                });

                team2Players.forEach(player => {
                    stats[player].gamesPlayed++;
                    stats[player].pointsFor += game.team2Score;
                    stats[player].pointsAgainst += game.team1Score;
                    stats[player].winners += (game.playerWinners && game.playerWinners[player]) || 0;
                    stats[player].aces += (game.playerAces && game.playerAces[player]) || (game.team2Aces ? game.team2Aces / 2 : 0);
                    if (!team1Won) stats[player].wins++;
                    else stats[player].losses++;
                });
            });

            // Update summary stats
            document.getElementById('totalGames').textContent = games.length;
            document.getElementById('totalPoints').textContent = games.reduce((sum, g) => sum + g.team1Score + g.team2Score, 0);

            const totalAces = games.reduce((sum, g) => {
                if (g.playerAces) {
                    return sum + Object.values(g.playerAces).reduce((a, b) => a + b, 0);
                }
                return sum + (g.team1Aces || 0) + (g.team2Aces || 0);
            }, 0);
            document.getElementById('totalAces').textContent = totalAces;

            const totalWinners = Object.values(stats).reduce((sum, p) => sum + p.winners, 0);
            document.getElementById('totalWinners').textContent = totalWinners;

            // Calculate longest and quickest games
            const gamesWithDuration = games.filter(g => g.duration && g.duration > 0);
            if (gamesWithDuration.length > 0) {
                const longestGame = gamesWithDuration.reduce((max, game) => game.duration > max.duration ? game : max);
                const quickestGame = gamesWithDuration.reduce((min, game) => game.duration < min.duration ? game : min);

                const longestMin = Math.floor(longestGame.duration / 60);
                const longestSec = longestGame.duration % 60;
                const quickestMin = Math.floor(quickestGame.duration / 60);
                const quickestSec = quickestGame.duration % 60;

                const longestDuration = longestMin > 0 ? `${longestMin}m ${longestSec}s` : `${longestSec}s`;
                const quickestDuration = quickestMin > 0 ? `${quickestMin}m ${quickestSec}s` : `${quickestSec}s`;

                const longestPlayers = `${longestGame.team1[0]} & ${longestGame.team1[1]} vs ${longestGame.team2[0]} & ${longestGame.team2[1]}`;
                const quickestPlayers = `${quickestGame.team1[0]} & ${quickestGame.team1[1]} vs ${quickestGame.team2[0]} & ${quickestGame.team2[1]}`;

                document.getElementById('longestGame').innerHTML = `
                    <div style="font-size: 32px; font-weight: bold;">${longestDuration}</div>
                    <div style="font-size: 12px; margin-top: 8px; opacity: 0.9;">${longestPlayers}</div>
                `;
                document.getElementById('quickestGame').innerHTML = `
                    <div style="font-size: 32px; font-weight: bold;">${quickestDuration}</div>
                    <div style="font-size: 12px; margin-top: 8px; opacity: 0.9;">${quickestPlayers}</div>
                `;
            } else {
                document.getElementById('longestGame').innerHTML = '<div style="font-size: 32px; font-weight: bold;">-</div>';
                document.getElementById('quickestGame').innerHTML = '<div style="font-size: 32px; font-weight: bold;">-</div>';
            }

            // Win percentage leaderboard
            const winPercentage = players.map(player => ({
                name: player,
                value: stats[player].gamesPlayed > 0 ? (stats[player].wins / stats[player].gamesPlayed * 100).toFixed(1) : 0,
                display: stats[player].gamesPlayed > 0 ? `${(stats[player].wins / stats[player].gamesPlayed * 100).toFixed(1)}%` : 'N/A',
                subtitle: `${stats[player].wins}-${stats[player].losses} (${stats[player].gamesPlayed} games)`
            })).sort((a, b) => b.value - a.value);

            document.getElementById('winPercentageLeaderboard').innerHTML = winPercentage.map(p => `
                <div class="leaderboard-item">
                    <div class="player-name">${p.name}</div>
                    <div class="player-stats">
                        <div style="font-size: 20px; font-weight: bold;">${p.display}</div>
                        <div style="font-size: 14px;">${p.subtitle}</div>
                    </div>
                </div>
            `).join('');

            // Total wins leaderboard
            const totalWins = players.map(player => ({
                name: player,
                value: stats[player].wins,
                display: stats[player].wins,
                subtitle: `${stats[player].gamesPlayed} games played`
            })).sort((a, b) => b.value - a.value);

            document.getElementById('totalWinsLeaderboard').innerHTML = totalWins.map(p => `
                <div class="leaderboard-item">
                    <div class="player-name">${p.name}</div>
                    <div class="player-stats">
                        <div style="font-size: 20px; font-weight: bold;">${p.display} wins</div>
                        <div style="font-size: 14px;">${p.subtitle}</div>
                    </div>
                </div>
            `).join('');

            // Points per game leaderboard
            const ppg = players.map(player => ({
                name: player,
                value: stats[player].gamesPlayed > 0 ? stats[player].pointsFor / stats[player].gamesPlayed : 0,
                display: stats[player].gamesPlayed > 0 ? (stats[player].pointsFor / stats[player].gamesPlayed).toFixed(1) : 'N/A',
                subtitle: `${stats[player].pointsFor} total points`
            })).sort((a, b) => b.value - a.value);

            document.getElementById('pointsPerGameLeaderboard').innerHTML = ppg.map(p => `
                <div class="leaderboard-item">
                    <div class="player-name">${p.name}</div>
                    <div class="player-stats">
                        <div style="font-size: 20px; font-weight: bold;">${p.display} PPG</div>
                        <div style="font-size: 14px;">${p.subtitle}</div>
                    </div>
                </div>
            `).join('');

            // Winners leaderboard
            const winners = players.map(player => ({
                name: player,
                value: stats[player].winners,
                display: stats[player].winners,
                subtitle: stats[player].gamesPlayed > 0 ? `${(stats[player].winners / stats[player].gamesPlayed).toFixed(2)} per game` : 'N/A'
            })).sort((a, b) => b.value - a.value);

            document.getElementById('winnersLeaderboard').innerHTML = winners.map(p => `
                <div class="leaderboard-item">
                    <div class="player-name">${p.name}</div>
                    <div class="player-stats">
                        <div style="font-size: 20px; font-weight: bold;">${p.display} winners</div>
                        <div style="font-size: 14px;">${p.subtitle}</div>
                    </div>
                </div>
            `).join('');

            // Aces leaderboard
            const aces = players.map(player => ({
                name: player,
                value: stats[player].aces,
                display: stats[player].aces.toFixed(1),
                subtitle: stats[player].gamesPlayed > 0 ? `${(stats[player].aces / stats[player].gamesPlayed).toFixed(2)} per game` : 'N/A'
            })).sort((a, b) => b.value - a.value);

            document.getElementById('acesLeaderboard').innerHTML = aces.map(p => `
                <div class="leaderboard-item">
                    <div class="player-name">${p.name}</div>
                    <div class="player-stats">
                        <div style="font-size: 20px; font-weight: bold;">${p.display} aces</div>
                        <div style="font-size: 14px;">${p.subtitle}</div>
                    </div>
                </div>
            `).join('');

            // Individual player breakdown
            document.getElementById('playerBreakdown').innerHTML = players.map(player => {
                const s = stats[player];
                const winRate = s.gamesPlayed > 0 ? (s.wins / s.gamesPlayed * 100).toFixed(1) : 0;
                const ppg = s.gamesPlayed > 0 ? (s.pointsFor / s.gamesPlayed).toFixed(1) : 0;
                const wpg = s.gamesPlayed > 0 ? (s.winners / s.gamesPlayed).toFixed(2) : 0;
                const apg = s.gamesPlayed > 0 ? (s.aces / s.gamesPlayed).toFixed(2) : 0;
                const pointDiff = s.pointsFor - s.pointsAgainst;

                return `
                    <div style="background: #f8f9fa; padding: 20px; margin-bottom: 15px; border-radius: 10px;">
                        <h3 style="color: #667eea; margin-bottom: 15px;">${player}</h3>
                        <div class="advanced-stats-grid">
                            <div class="advanced-stat-card">
                                <h4>Games Played</h4>
                                <div class="stat-value">${s.gamesPlayed}</div>
                            </div>
                            <div class="advanced-stat-card">
                                <h4>Win Rate</h4>
                                <div class="stat-value">${winRate}%</div>
                            </div>
                            <div class="advanced-stat-card">
                                <h4>Record</h4>
                                <div class="stat-value">${s.wins}-${s.losses}</div>
                            </div>
                            <div class="advanced-stat-card">
                                <h4>Points Per Game</h4>
                                <div class="stat-value">${ppg}</div>
                            </div>
                            <div class="advanced-stat-card">
                                <h4>Total Points</h4>
                                <div class="stat-value">${s.pointsFor}</div>
                            </div>
                            <div class="advanced-stat-card">
                                <h4>Point Differential</h4>
                                <div class="stat-value" style="color: ${pointDiff >= 0 ? '#28a745' : '#dc3545'}">
                                    ${pointDiff > 0 ? '+' : ''}${pointDiff}
                                </div>
                            </div>
                            <div class="advanced-stat-card">
                                <h4>Total Winners</h4>
                                <div class="stat-value">${s.winners}</div>
                            </div>
                            <div class="advanced-stat-card">
                                <h4>Winners Per Game</h4>
                                <div class="stat-value">${wpg}</div>
                            </div>
                            <div class="advanced-stat-card">
                                <h4>Total Aces</h4>
                                <div class="stat-value">${s.aces.toFixed(1)}</div>
                            </div>
                            <div class="advanced-stat-card">
                                <h4>Aces Per Game</h4>
                                <div class="stat-value">${apg}</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Partnership tracking
            const partnerships = {};
            players.forEach(p1 => {
                players.forEach(p2 => {
                    if (p1 < p2) {
                        partnerships[`${p1}-${p2}`] = 0;
                    }
                });
            });

            games.forEach(game => {
                const team1Key = [game.team1[0], game.team1[1]].sort().join('-');
                const team2Key = [game.team2[0], game.team2[1]].sort().join('-');
                if (partnerships[team1Key] !== undefined) partnerships[team1Key]++;
                if (partnerships[team2Key] !== undefined) partnerships[team2Key]++;
            });

            const totalPossiblePartnerships = Object.keys(partnerships).length;
            const playedPartnerships = Object.values(partnerships).filter(count => count > 0).length;
            const allPartnershipsPlayed = playedPartnerships === totalPossiblePartnerships;

            // Calculate unique matchups played (not just partnerships)
            const matchupsPlayed = new Set();
            games.forEach(game => {
                const team1 = [game.team1[0], game.team1[1]].sort().join('-');
                const team2 = [game.team2[0], game.team2[1]].sort().join('-');
                const matchup = [team1, team2].sort().join(' vs ');
                matchupsPlayed.add(matchup);
            });

            document.getElementById('uniquePartnerships').textContent = `${playedPartnerships} / ${totalPossiblePartnerships}`;
            document.getElementById('allPartnershipsStatus').innerHTML = allPartnershipsPlayed
                ? '‚úÖ Complete!'
                : `‚ùå ${totalPossiblePartnerships - playedPartnerships} partnerships remaining`;
            document.getElementById('roundRobinProgress').textContent = `${matchupsPlayed.size} / 45 games`;
        }

    </script>
</body>
</html>